<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>执行时上下文栈</title>
</head>
<body>
    <script>
        // var foo = function(){
        //     console.log('foo1');
        // }
        // foo();  //foo1
        // var foo = function(){
        //     console.log('foo2');
        // }
        // foo();  //foo2

        // function foo(){
        //     console.log('foo1');
        // }
        // foo();  //foo2
        // function foo(){
        //     console.log('foo2');
        // }
        // foo();  //foo2

        // javascript引擎并非一行一行地分析和执行程序，而是一段一段的分析执行。当执行一段代码时，会进行一个准备工作，比如第一个例子中的变量提升，和第二个例子中的函数提升。

        // let a = 'hello world!';

        // 执行栈：其他编程语言中所说的“调用栈”，是一种拥有LIFO(后进先出)数据结构的栈，被用来存储代码运行时创建的所有执行上下文。

        // function first(){
        //     console.log('Inside first function');
        //     second();
        //     console.log('Again inside first function');
        // }

        // function second(){
        //     console.log('Inside second function');
        // }

        // first();
        // console.log('Inside Global Execution Context');

        // 执行上下文栈：global Execution Context -> 将first()推入顶部 -> 将seconde()推入顶部 -> seconde()执行完毕，它的执行时上下文被弹出 -> 接下来first()继续执行 -> 接下来first()执行完毕，它的执行时上下文被弹出 -> 回到global Execution Context

        // This绑定：
        // 在全局执行上下文中，this的值指向全剧对象。
        // 在函数执行上下文，this的值取决于该函数是如何被调用的。如果它被一个引用对象调用，那么this会被设置成哪个对象，否则this的值被设置为全局对象或者undefined
        // let foo = {
        //     baz: function(){
        //         console.log(this);
        //     }
        // }

        // // foo.baz();  //{baz: ƒ}

        // let bar = foo.baz;
        // bar();  //Window

        // 变量环境
        let a = 20;
        const b = 30;
        var c;

        function multiply(e, f){
            var g = 20;
            return e * f * g;
        }

        c = multiply(20, 30);
        console.log(c); //12000

        // 其他
        // let animal = {
        //     eat(){
        //         this.full = true;
        //     }
        // }
        // let rabit = {__proto__: animal};
        // rabit.eat();

        // console.log(animal.full);   //undefined
        // console.log(rabit.full);    //true  

        // let animal = {
        //     jumps: '动物'
        // };
        // let rabbit = {
        //     __proto__: animal,
        //     jumps: undefined    
        // };

        // console.log(rabbit.jumps);  //undefined
        // delete rabbit.jumps;
        // console.log(rabbit.jumps);  //动物
        // delete animal.jumps;
        // console.log(rabbit.jumps);  //undefined

        // function P(){
        // }
        // Object.defineProperty(P.prototype, 'key', {
        //     get: function(){
        //         return 'a';
        //     }
        // })
        // P.prototype.key = 'b';
        // P.key = 'c';
        // var p = new P();
        // p.key = 'd';
        // console.log(p.key); //'a'
    </script>
</body>
</html>